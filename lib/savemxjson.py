# -*- coding: utf-8 -*-
"""
Created on Wed Feb 27 11:00:36 2013

@author: tricc
"""
import datetime
import json

#import sys
#sys.path.append('../lib/')
#from lrf_histogram import *
import timestamp as ts

def savemxjson(LRFobj, directory, user, comment):
    time_filename = ts.timeStamped('')
    mx_filename = 'm'+time_filename[2::]+'.mxj'
    print mx_filename
    
    fid_wr = open(directory+mx_filename, 'wt')
    now = datetime.datetime.now()
    datestr = now.ctime()
    print datestr
    
    mxjson={}
    mxjson['HEADER'] = "File autogenerated by user %s at time %s \n" % (user, datestr)
    mxjson['COMMENT'] = "Inserted comment by user: %s \n" % comment
    mxjson['VERSION'] = "VERSION_SECTION:\n %s \n" %  LRFobj.version
    mxjson['EEPROM'] = "EEPROM_SECTION:\n %s \n" %LRFobj.EEPROMparameter
    mxjson['MXSTREAM'] = "MXSTREAM_SECTION:\n %s \n" % LRFobj.mx_cmd_info['lrf_raw_stream']
    
    json_string = json.dumps(mxjson)    
    print json_string  
    
    fid_wr.write(json.dumps(mxjson))
    fid_wr.close()
    